<% if user_signed_in? %>
    <% if current_user.role == 1 %>
        <h2 class="ms-5 mt-5 mb-4">热销榜</h2>

        <div class="d-flex mx-5 mb-5">
            <% @ranked_products.each do |product| %>
                <div class="card me-5" style="width: 12rem; border: 0px; border-radius: 20px;">
                    <div style="border-radius: 20px; border: 1px solid black;">
                        <%= link_to product, method: :get do %>
                            <img src="<%= (url_for(product.image_dir)) %>" class="card-img-top" style="height: 11.9rem; width: 11.9rem; border-radius: 20px;" alt="...">
                        <% end %>
                    </div>
                    
                    <div class="card-body d-flex flex-column">
                        <%= link_to product, :style => "text-decoration: none;" ,method: :get do %>
                            <h5 style="color: black;"><%= product.name %></h5>
                            <p style="color: black;">已售出： <%= product.sales.to_i %></p>
                        <% end %>
                    </div>
                </div>
            <% end %>
        </div>

        <h2 class="ms-5 mt-5 mb-4">商品墙</h2>

        <div class="d-flex mx-5 mb-5">
            <% @random_products.each do |product| %>
                <div class="card me-5" style="width: 12rem; border: 0px; border-radius: 20px;">
                    <div style="border-radius: 20px; border: 1px solid black;">
                        <%= link_to product, method: :get do %>
                            <img src="<%= (url_for(product.image_dir)) %>" class="card-img-top" style="height: 11.9rem; width: 11.9rem; border-radius: 20px;" alt="...">
                        <% end %>
                    </div>
                    
                    <div class="card-body d-flex flex-column">
                        <%= link_to product, :style => "text-decoration: none;" ,method: :get do %>
                            <h5 style="color: black;"><%= product.name %></h5>
                            <p style="color: black;">¥ <%= (product.price).to_f %></p>
                        <% end %>
                    </div>
                </div>
            <% end %>
        </div>
    <% elsif current_user.role == 2 %>
        <p>卖家 </p>
        <h1>Home#index</h1>
        <p>Find me in app/views/home/index.html.erb</p>
    <% elsif current_user.role == 3 %>
        <p>管理员</p>
        <h1>Home#index</h1>
        <p>Find me in app/views/home/index.html.erb</p>
    <% end %>
<% else %>
    <h2 class="ms-5 mt-5 mb-4">热销榜</h2>

    <div class="d-flex mx-5 mb-5">
        <% @ranked_products.each do |product| %>
            <div class="card me-5" style="width: 12rem; border: 0px; border-radius: 20px;">
                <div style="border-radius: 20px; border: 1px solid black;">
                    <%= link_to product, method: :get do %>
                        <img src="<%= (url_for(product.image_dir)) %>" class="card-img-top" style="height: 11.9rem; width: 11.9rem; border-radius: 20px;" alt="...">
                    <% end %>
                </div>
                
                <div class="card-body d-flex flex-column">
                    <%= link_to product, :style => "text-decoration: none;" ,method: :get do %>
                        <h5 style="color: black;"><%= product.name %></h5>
                        <p style="color: black;">已售出： <%= product.sales.to_i %></p>
                    <% end %>
                </div>
            </div>
        <% end %>
    </div>

    <h2 class="ms-5 mt-5 mb-4">商品墙</h2>

    <div class="d-flex mx-5 mb-5">
        <% @random_products.each do |product| %>
            <div class="card me-5" style="width: 12rem; border: 0px; border-radius: 20px;">
                <div style="border-radius: 20px; border: 1px solid black;">
                    <%= link_to product, method: :get do %>
                        <img src="<%= (url_for(product.image_dir)) %>" class="card-img-top" style="height: 11.9rem; width: 11.9rem; border-radius: 20px;" alt="...">
                    <% end %>
                </div>
                
                <div class="card-body d-flex flex-column">
                    <%= link_to product, :style => "text-decoration: none;" ,method: :get do %>
                        <h5 style="color: black;"><%= product.name %></h5>
                        <p style="color: black;">¥ <%= (product.price).to_f %></p>
                    <% end %>
                </div>
            </div>
        <% end %>
    </div>
<% end %>


